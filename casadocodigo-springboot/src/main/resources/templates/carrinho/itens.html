<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head th:replace="fragments/headTag :: headTag">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<title>Casa do Código</title>
	</head>
	<body>
		<div th:include="fragments/bodyHeader" th:remove="tag"></div>
		<section class="container middle">
			  <h2 id="cart-title">Seu carrinho de compras</h2>
			    <table id="cart-table">
			      <colgroup>
			        <col class="item-col"/>
			        <col class="item-price-col"/>
			        <col class="item-quantity-col"/>
			        <col class="line-price-col"/>
			        <col class="delete-col"/>
			      </colgroup>
			      <thead>
			        <tr>
			          <th class="cart-img-col" width="10%">Imagem</th>
			          <th width="55%">Item</th>
			          <th width="10%">Preço</th>
			          <th width="10%">Quantidade</th>
			          <th width="10%">Total</th>
			          <th width="5%"></th>
			        </tr>
			      </thead>
			      <tbody>
					    <tr th:each="item : ${@carrinhoCompras.itens}">
					        <td class="cart-img-col" style="padding-left:20px">
					        	<img width="71px" height="100px" th:attr="src=@{${item.produto.sumarioPath}},alt=${item.produto.titulo},title=${item.produto.titulo}" />
					        </td>
					        <td class="item-title"><span th:text="${item.produto.titulo}"></span></td>
					        <td class="numeric-cell"><span th:text="${item.tipoPreco}"></span></td>
					        <td class="quantity-input-cell">
					            <input type="number" min="0" readonly="readonly" id="quantidade" name="quantidade" th:value="${@carrinhoCompras.getQuantidade(item)}" />
					        </td>
					        <td class="numeric-cell"><span th:text="${@carrinhoCompras.getTotal(item)}"></span></td>
							<td class="remove-item">
							    <form th:action="@{/carrinho/remover}" method="post">
							        <input type="hidden" name="produtoId" th:value="${item.produto.id}"/>
							        <input type="hidden" name="tipoPreco" th:value="${item.tipoPreco}"/>
							        <input type="image" src="/excluir.png" alt="Excluir" title="Excluir" />
							    </form>
							</td>			    
						</tr>
			      </tbody>
					<tfoot>
					    <tr>
					        <td colspan="3">
							<form th:action="@{/pagamento/finalizar}" method="post">
					            <input type="submit" class="checkout" name="checkout" value="Finalizar compra" data-toggle="modal" data-target="#exampleModal"/>
	    					  </form>
					        </td>
					        <td></td>
					        <td class="numeric-cell"><span th:text="${@carrinhoCompras.getTotal()}"></span></td>
					        <td></td>
					    </tr>
					</tfoot>
			    </table>
			  
			  <h2>Você já conhece os outros livros da Casa do Código?</h2>
			  <ul id="collection" class="related-books">          
			      <li th:each="produto : ${produtos}" class="col-left">
						<a th:href="@{/produtos/detalhe/{id}(id=${produto.id})}" class="block clearfix book-suggest" data-book="${produto.titulo}">
							<img width="113px" height="160px" th:attr="src=@{${produto.sumarioPath}},alt=${produto.titulo},title=${produto.titulo}" />
				        </a>
			      </li>          
			  </ul>
			  
			  <h2><a th:href="@{/}" >Retornar para lista de produtos</a></h2>
			</section>
			<!-- Trigger the modal with a button -->
			<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>
			
			<!-- Modal -->
			<div id="myModal" class="modal fade" role="dialog">
			  <div class="modal-dialog">
			
			    <!-- Modal content-->
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal">&times;</button>
			        <h4 class="modal-title">Modal Header</h4>
			      </div>
			      <div class="modal-body">
			        <p>Some text in the modal.</p>
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			      </div>
			    </div>
			
			  </div>
			</div>
	</body>
</html>